CHANGELOG

- Dodano panel trenera z przedrostkiem URL /trainer/
- Utworzono layout dla trenera z weryfikacją uprawnień (rola trainer lub admin)
- Utworzono stronę dashboardu trenera z przykładową treścią lorem ipsum
- Dodano link do panelu trenera w nawigacji dla użytkowników z rolą trainer
- Zaktualizowano przekierowania w login page i landing page aby trenerzy byli kierowani do /trainer/dashboard
- Dodano panel sportowca z przedrostkiem URL /athlete/
- Utworzono layout dla sportowca z weryfikacją uprawnień (rola athlete)
- Utworzono stronę dashboardu sportowca z przykładową treścią lorem ipsum
- Zaktualizowano nawigację aby każda rola (athlete, trainer, admin) miała dedykowane elementy menu
- Zaktualizowano przekierowania w login page, landing page i app layout aby sportowcy byli kierowani do /athlete/dashboard
- Dodano dostęp do /chat, /templates, /exercises i /knowledge-zone w panelu trenera
- Potwierdzono że /profile jest dostępny dla wszystkich ról (athlete, trainer, admin) poprzez stopkę nawigacji
- Skopiowano strony chat, templates, exercises, knowledge-zone i profile do folderu (trainer) aby uniknąć przekierowań z layoutu (app)
- Zaktualizowano nawigację trenera aby używała ścieżek /trainer/chat, /trainer/templates, /trainer/exercises, /trainer/knowledge-zone
- Skopiowano te same strony do folderu (athlete) dla spójności
- Zaktualizowano nawigację sportowca aby używała ścieżek /athlete/chat, /athlete/templates, /athlete/exercises, /athlete/knowledge-zone
- Dodano dynamiczne linki do profilu w zależności od roli użytkownika (/athlete/profile, /trainer/profile, /admin/profile)
- Poprawiono wyświetlanie badge z liczbą nieprzeczytanych wiadomości dla różnych ścieżek czatu
- Skopiowano stronę profile do folderu (admin) dla administratorów
- Zaktualizowano wszystkie wewnętrzne linki do czatu w stronach /trainer/chat i /athlete/chat
- Naprawiono link do czatu w profilu sportowca (trener -> sportowiec) aby używał /trainer/chat
- Usunięto oryginalne strony z folderu (app) aby uniknąć konfliktu równoległych stron w Next.js
- Przeniesiono strony z (trainer)/ do (trainer)/trainer/ aby uniknąć konfliktu routingu
- Przeniesiono strony z (athlete)/ do (athlete)/athlete/ dla spójności struktury
- Naprawiono przekierowania w (admin)/layout.tsx aby poprawnie kierować użytkowników do odpowiednich dashboardów
- Dodano logikę przekierowań w (trainer)/layout.tsx dla użytkowników z niewłaściwą rolą
- Dodano logikę przekierowań w (athlete)/layout.tsx dla użytkowników z niewłaściwą rolą

MIGRACJA Z FIREBASE NA MONGODB:
- Zainstalowano pakiety: mongodb, mongoose, bcryptjs, jsonwebtoken, next-auth
- Utworzono konfigurację połączenia MongoDB w src/lib/mongodb.ts
- Utworzono modele Mongoose dla wszystkich kolekcji (User, Article, Conversation, Message, itp.)
- Zaimplementowano NextAuth.js jako system autentykacji zastępujący Firebase Auth
- Utworzono API routes dla operacji CRUD na bazie danych (/api/db/[collection])
- Zaimplementowano hooki React do pracy z MongoDB (useCollection, useDoc, useCreateDoc, useUpdateDoc, useDeleteDoc)
- Utworzono MongoDBProvider zastępujący FirebaseProvider
- Zaktualizowano główny layout aplikacji aby używał MongoDBProvider
- Zaktualizowano strony login i register aby używały NextAuth zamiast Firebase Auth
- Dodano zmienne środowiskowe MONGO_DB_URI, NEXTAUTH_SECRET, NEXTAUTH_URL do .env
- Zaktualizowano wszystkie layouty (athlete, trainer, admin, app) aby używały MongoDB hooks
- Utworzono warstwę kompatybilności Firebase (src/lib/firebase-compat.tsx) dla stopniowej migracji
- Zaktualizowano src/firebase/index.ts aby eksportował warstwę kompatybilności
- Build aplikacji zakończony sukcesem - aplikacja kompiluje się poprawnie
- Odinstalowano pakiet firebase z projektu (npm uninstall firebase)
- Usunięto pliki konfiguracyjne Firebase (firestore.rules, apphosting.yaml)
- Katalog src/firebase zachowany jako warstwa kompatybilności (do usunięcia po pełnej migracji)
- Zaktualizowano importy w plikach admina aby używały warstwy kompatybilności
- Utworzono funkcje stub w warstwie kompatybilności dla wszystkich funkcji Firebase (doc, collection, query, setDoc, getStorage, itp.)
- Zaktualizowano wszystkie importy Firebase w plikach aplikacji (athlete, trainer) - 22 pliki
- Zaktualizowano src/firebase/errors.ts aby nie używał Firebase Auth
- Usunięto duplikaty importów w plikach templates
- Build zakończony sukcesem - wszystkie pliki skompilowane poprawnie
- Zaktualizowano src/components/nav.tsx aby używał MongoDB hooks zamiast Firebase
- Naprawiono błąd ReferenceError: doc is not defined w komponencie nawigacji

MIGRACJA Z FIREBASE NA MONGODB ZAKOŃCZONA POMYŚLNIE!
Aplikacja używa teraz MongoDB zamiast Firebase.
NextAuth.js zastąpił Firebase Auth.
MongoDB + Mongoose zastąpiły Firestore.

=== 2025-10-30 - Reorganizacja panelu admina ===
- Przeniesiono zarządzanie użytkownikami z /admin/dashboard do /admin/users
- Dashboard admina (/admin/dashboard) jest teraz pustą stroną z placeholder
- Zaktualizowano nawigację admina - dodano osobny link do zarządzania użytkownikami
- Usunięto nieużywane importy z komponentu nawigacji
- Naprawiono błąd Next.js 15 - params muszą być await'owane w API routes
- Zaktualizowano /api/db/[collection]/route.ts i /api/db/[collection]/[id]/route.ts

=== 2025-10-30 - Usunięcie błędów Firebase ===
- Naprawiono błąd ReferenceError: doc is not defined w src/app/page.tsx
- Zaktualizowano src/app/page.tsx aby używał MongoDB hooks (useUser, useDoc) zamiast Firebase
- Usunięto zależności od useFirestore, useMemoFirebase i doc z landing page
- Wszystkie pliki aplikacji importują funkcje Firebase z warstwy kompatybilności (@/firebase)
- Warstwa kompatybilności eksportuje stuby dla wszystkich funkcji Firebase (doc, collection, query, itp.)

=== 2025-10-30 - Migracja strony zarządzania użytkownikami na MongoDB ===
- Przepisano /admin/users/page.tsx aby używał MongoDB zamiast Firebase
- Zamieniono Firebase hooks (useFirestore, useMemoFirebase, useCollection z @/firebase) na MongoDB hooks (useCollection, useDoc, useUpdateDoc z @/lib/db-hooks)
- Usunięto wszystkie importy Firebase (doc, collection, setDoc, errorEmitter, FirestorePermissionError)
- Dodano funkcję getRoleLabel() do wyświetlania polskich nazw ról użytkowników
- Zaktualizowano obsługę błędów - używa teraz toast zamiast Firebase error emitter
- Dodano automatyczne odświeżanie listy użytkowników po edycji (refetch)
- Strona wyświetla użytkowników z bazy MongoDB z możliwością edycji imienia i roli

=== 2025-10-30 - Migracja strony zarządzania grupami mięśniowymi na MongoDB ===
- Przepisano /admin/muscle-groups/page.tsx aby używał MongoDB zamiast Firebase
- Zamieniono Firebase hooks (useFirestore, useMemoFirebase, useCollection, addDoc, updateDoc, deleteDoc z @/firebase) na MongoDB hooks (useCollection, useCreateDoc, useUpdateDoc, useDeleteDoc z @/lib/db-hooks)
- Usunięto wszystkie importy Firebase (doc, collection, addDoc, updateDoc, deleteDoc, errorEmitter, FirestorePermissionError)
- Ulepszono zarządzanie dialogami - jeden dialog dla dodawania i edycji z dynamicznym tytułem
- Zaktualizowano obsługę błędów - używa teraz toast zamiast Firebase error emitter
- Dodano automatyczne odświeżanie listy grup mięśniowych po dodaniu, edycji lub usunięciu (refetch)
- Dodano wskaźnik ładowania dla przycisku usuwania
- Poprawiono walidację URL obrazka - akceptuje pusty string jako opcjonalną wartość
- Strona umożliwia dodawanie nowych grup mięśniowych, edycję istniejących oraz ich usuwanie

